{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/information-technology/environment-variable-of-windows-service","result":{"data":{"blogImage":{"edges":[]},"oldBlogImage":{"edges":[{"node":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACsElEQVR42r1Uy08TQRyeXRACGqMH78aLMVhjYtXEA4ke/A+8eDDxoBG0PFsKlZcPEFIsDxsEI3oxIZqYSBQSAmigIi8PtLC7xdZSWqDQdksR2GIf4DcltrTBcHPzZXZn5vu+zP4eQ0KRrRi2tvd4sLj+O+L0B4dsG6+/r1T0uq93zp9ssF5ut5Mk3tpmxLESnHBKPims/yaCB9LxOssBjUBKOFI0TfKm2EI6yltspN+y3jbqK+lZvvbGeal19kS9FbyMMn7cIcnqLCTHyEJQzFGlmmfL+FSNQI2Kp88/sxG8qB/MCqbwwagoL7NSGHdKZ5ttRMWlanimjCelccACTDnETHSSoqGWGOmGms+sEMYdAVnTT1izicpk8e4NOi3hM/6HOP2+kLYLmOL8R6rNE87AOWyrORillycAK4gLoksQdKKIg8F415RRxI3aJdkTC7ljZHcI90wxsAoTuT0pr7eQ8l438l7V567ucz/s9zwe8NQMeBoGvYuroVcTK7VfPDqD2GgQW4ZF/bDYOuJrH/W9HPM9H/F94H6R/C4XUPBxqejTkrJ7Sd2zDMBo3h/qiIphBDwd8uoAgxdGzQZRO+jtnFwlNL35cTAYFaZMFY69car2B8k1sokEgK7kGOVaK0mLRigGVA9TKhyuMqNIziDaKi6JAGCFKLmL+lmSlImdVKFIxhxSlm6/VKX8Q4zazmrcV6xBbSacCrk9WGmG+PS+YhadkBeNRAFtD0bJ4T+p+G9j4A/hvtsiLjbMbnRO+ms+e26+W8hus6PLjz6YOVRhHpuTZFoLIs+i7ZS01Xb6MRawC3obSbo3AsGITQzizP5AGEVy6/3i1Y45nP/YoxlWzdHOLZyml0GuSd5oJeHoBRSObO99CUUfEFyrIaNrs1tYa/oqKrpcV17Yb7xd+ANh461FOcAPBQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/17247bfea433f676e3e9e092215ea21c/acb7c/2d0a57e2b95703c32306caaf316d9842.png","srcSet":"/static/17247bfea433f676e3e9e092215ea21c/1c9ce/2d0a57e2b95703c32306caaf316d9842.png 64w,\n/static/17247bfea433f676e3e9e092215ea21c/bf8e1/2d0a57e2b95703c32306caaf316d9842.png 128w,\n/static/17247bfea433f676e3e9e092215ea21c/acb7c/2d0a57e2b95703c32306caaf316d9842.png 256w","sizes":"(min-width: 256px) 256px, 100vw"},"sources":[{"srcSet":"/static/17247bfea433f676e3e9e092215ea21c/2e71d/2d0a57e2b95703c32306caaf316d9842.avif 64w,\n/static/17247bfea433f676e3e9e092215ea21c/3c49f/2d0a57e2b95703c32306caaf316d9842.avif 128w,\n/static/17247bfea433f676e3e9e092215ea21c/5a128/2d0a57e2b95703c32306caaf316d9842.avif 256w","type":"image/avif","sizes":"(min-width: 256px) 256px, 100vw"},{"srcSet":"/static/17247bfea433f676e3e9e092215ea21c/8257c/2d0a57e2b95703c32306caaf316d9842.webp 64w,\n/static/17247bfea433f676e3e9e092215ea21c/6766a/2d0a57e2b95703c32306caaf316d9842.webp 128w,\n/static/17247bfea433f676e3e9e092215ea21c/22bfc/2d0a57e2b95703c32306caaf316d9842.webp 256w","type":"image/webp","sizes":"(min-width: 256px) 256px, 100vw"}]},"width":256,"height":256}}}}]},"markdownRemark":{"id":"12e222ee-2874-5086-bb04-7d6e1617dfb6","excerpt":"Windows…","html":"<p>Windowsサービスに登録されているアプリケーションのために環境変数を新規追加したり変更した場合には、<strong>マシンの再起動</strong>が必要です。サービスの再起動などでは環境変数は反映されません。<br>\n「環境変数設定が全然反映されない！」とハマった場合はこのあたり確認してみてください。</p>\n<h2>条件</h2>\n<ul>\n<li>Windowsサービスに登録されているアプリケーション</li>\n<li>そのサービスが「Local System」ユーザで実行されている</li>\n<li>環境変数を参照している</li>\n<li>その環境変数を追加/更新/削除などの変更を加えている</li>\n</ul>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/abbfe/image-3-1024x522.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVR42oWR2W6DMBBF8/+/VPWxeS1SAwQwS40XjA3GOIQ10AmR0peoHVn2eHSPrmd8aIy9WOt48duH8350jg5yEY2+i4SqCItTiD2Uewn5Oqfup4f8GBf6sTKmDrc9hmHYtm1dV9grbWIU4SyVpTCNZpRorbfbkrknjqJt10BM4wjw+oQhh11pE5wD3/dJToQo0zTRtYY6hquUT5m1lyc8/jo3bRRFjLFKVYzzOI4JIVLKHOdQfMqmaXoBqzuMKqWMaaSSJM+VUsuyYIyLQvwDV40FXVVVxpjr9dp1FyHEOA47XGy77g+4DcMIhYgxPk6TtZYXxbzMAJei/Ne5DfwgSRLOeWMMPOHkunVdU0rFS7gfhnWPe8+18f0zwDAnAV5lSQmF/rMsg4HN8wxfA2Tf94eu6+CQoKAMmmzbFgYLGPiAFJoE/0fyqPA94KqU+gG5XTHABmx+nwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/85704/image-3-1024x522.webp 240w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/2d484/image-3-1024x522.webp 480w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/ac99e/image-3-1024x522.webp 960w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/d757a/image-3-1024x522.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/74bfa/image-3-1024x522.png 240w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/b3a52/image-3-1024x522.png 480w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/97137/image-3-1024x522.png 960w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/abbfe/image-3-1024x522.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/97137/image-3-1024x522.png\"\n            alt=\"image 3 1024x522\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>対象のWindowsサービスがどのユーザで実行されているかの確認箇所</p>\n</figcaption>\n</figure>\n<h2>対応</h2>\n<p>Windowsマシンを再起動する。</p>\n<h2>根拠</h2>\n<p>以下、公式にドキュメントで回答があります。</p>\n<ul>\n<li><a href=\"https://support.microsoft.com/en-us/help/821761/changes-that-you-make-to-environment-variables-do-not-affect-services\">Changes that you make to environment variables do not affect services that run under the Local System account until you restart Windows</a>（英語版元記事）</li>\n<li><a href=\"https://support.microsoft.com/ja-jp/help/821761/changes-that-you-make-to-environment-variables-do-not-affect-services\">環境変数への変更には Windows を再起動するまで、ローカル システム アカウントで実行されているサービスは影響しません</a>（日本語訳版）</li>\n</ul>","fields":{"slug":"/posts/environment-variable-of-windows-service/"},"frontmatter":{"title":"環境変数を変更したらWindowsサービスに気をつけろ","date":"2019/01/23","dateModified":null,"description":null,"category":null,"categories":["information-technology"],"tags":["windows","環境変数"]}},"mdPrevious":{"fields":{"slug":"/posts/aws-summit-japan-2022-05/"},"frontmatter":{"title":"AWS Summit Japanのセッション一覧・タイムテーブル 【2022/5/25 & 26 & 6/1】","category":null,"categories":["event-report"]}},"mdNext":{"fields":{"slug":"/posts/gist-it/"},"frontmatter":{"title":"GitHubのコードをブログに貼る時の注意点【gist-it】","category":null,"categories":["information-technology"]}}},"pageContext":{"id":"12e222ee-2874-5086-bb04-7d6e1617dfb6","previousPostId":"142c90e0-e74e-504a-8ed0-654993230dda","nextPostId":"ca05fe08-001d-55c6-b475-ceff7e7cafa5","imagePath":"posts/environment-variable-of-windows-service/images/2d0a57e2b95703c32306caaf316d9842.png"}},"staticQueryHashes":["3695098706","798193786"],"slicesMap":{}}