{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/information-technology/environment-variable-of-windows-service","result":{"data":{"blogImage":{"edges":[]},"oldBlogImage":{"edges":[]},"markdownRemark":{"id":"004204a9-bdc1-519c-8d5a-5f2683f1fc7e","excerpt":"Windows…","html":"<p>Windowsサービスに登録されているアプリケーションのために環境変数を新規追加したり変更した場合には、<strong>マシンの再起動</strong>が必要です。サービスの再起動などでは環境変数は反映されません。<br>\n「環境変数設定が全然反映されない！」とハマった場合はこのあたり確認してみてください。</p>\n<h2>条件</h2>\n<ul>\n<li>Windowsサービスに登録されているアプリケーション</li>\n<li>そのサービスが「Local System」ユーザで実行されている</li>\n<li>環境変数を参照している</li>\n<li>その環境変数を追加/更新/削除などの変更を加えている</li>\n</ul>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/abbfe/image-3-1024x522.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVR42oWR2W6DMBBF8/+/VPWxeS1SAwQwS40XjA3GOIQ10AmR0peoHVn2eHSPrmd8aIy9WOt48duH8350jg5yEY2+i4SqCItTiD2Uewn5Oqfup4f8GBf6sTKmDrc9hmHYtm1dV9grbWIU4SyVpTCNZpRorbfbkrknjqJt10BM4wjw+oQhh11pE5wD3/dJToQo0zTRtYY6hquUT5m1lyc8/jo3bRRFjLFKVYzzOI4JIVLKHOdQfMqmaXoBqzuMKqWMaaSSJM+VUsuyYIyLQvwDV40FXVVVxpjr9dp1FyHEOA47XGy77g+4DcMIhYgxPk6TtZYXxbzMAJei/Ne5DfwgSRLOeWMMPOHkunVdU0rFS7gfhnWPe8+18f0zwDAnAV5lSQmF/rMsg4HN8wxfA2Tf94eu6+CQoKAMmmzbFgYLGPiAFJoE/0fyqPA94KqU+gG5XTHABmx+nwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/85704/image-3-1024x522.webp 240w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/2d484/image-3-1024x522.webp 480w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/ac99e/image-3-1024x522.webp 960w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/d757a/image-3-1024x522.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/74bfa/image-3-1024x522.png 240w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/b3a52/image-3-1024x522.png 480w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/97137/image-3-1024x522.png 960w,\n/static/7dc2c900c2143c12cf89fd88dbb9ba00/abbfe/image-3-1024x522.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7dc2c900c2143c12cf89fd88dbb9ba00/97137/image-3-1024x522.png\"\n            alt=\"image 3 1024x522\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>対象のWindowsサービスがどのユーザで実行されているかの確認箇所</p>\n</figcaption>\n</figure>\n<h2>対応</h2>\n<p>Windowsマシンを再起動する。</p>\n<h2>根拠</h2>\n<p>以下、公式にドキュメントで回答があります。</p>\n<ul>\n<li><a href=\"https://support.microsoft.com/en-us/help/821761/changes-that-you-make-to-environment-variables-do-not-affect-services\">Changes that you make to environment variables do not affect services that run under the Local System account until you restart Windows</a>（英語版元記事）</li>\n<li><a href=\"https://support.microsoft.com/ja-jp/help/821761/changes-that-you-make-to-environment-variables-do-not-affect-services\">環境変数への変更には Windows を再起動するまで、ローカル システム アカウントで実行されているサービスは影響しません</a>（日本語訳版）</li>\n</ul>","fields":{"slug":"/posts/environment-variable-of-windows-service/"},"frontmatter":{"title":"環境変数を変更したらWindowsサービスに気をつけろ","date":"2019/01/23","dateModified":null,"description":null,"category":null,"categories":["information-technology"],"tags":["windows","環境変数"]}},"mdPrevious":{"fields":{"slug":"/posts/gist-it/"},"frontmatter":{"title":"GitHubのコードをブログに貼る時の注意点【gist-it】","category":null,"categories":["information-technology"]}},"mdNext":{"fields":{"slug":"/posts/aws-summit-japan-2022-05/"},"frontmatter":{"title":"AWS Summit Japanのセッション一覧・タイムテーブル 【2022/5/25 & 26 & 6/1】","category":null,"categories":["event-report"]}}},"pageContext":{"id":"004204a9-bdc1-519c-8d5a-5f2683f1fc7e","previousPostId":"9fd2c0f3-0c41-584e-9f95-c97b3cfd9ca9","nextPostId":"b1729044-1090-513c-b0de-bce377419af0","imagePath":"posts\\environment-variable-of-windows-service\\images\\2d0a57e2b95703c32306caaf316d9842.png"}},"staticQueryHashes":["3695098706","798193786"],"slicesMap":{}}