{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/information-technology/labs-play-with-k8s-com","result":{"data":{"blogImage":{"edges":[]},"oldBlogImage":{"edges":[{"node":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC7klEQVR42nVUS09TQRRm704TN0Y3JrDwFRM3GpfGuPAXGBc+YmgUMBiRDRJ04WOh0ahIYpQYiQFpSFSCCYpS2kKB8mioUKC3tPTeO3fu3Hnc9t4+KKSethqwlOTLycyc7zsz58ycqRIJy2Am5YntIMwktLLLYAlhWlWgRDrVCNsKVWe6wW2LZ1LcYBymZQSQECaqKDdhgg1egmYU2GlbEMa7hoz2fiOGIIRgnGPCN2mEGdz8T6wRTiiXMe8cNM61ajUOVO1AJ5vQkz4SjjMIqpEdxFoRIHa8xDUOrboWPXaa7QPJYw0IxufvadIW/TYx4XC2hSg7Wq9ef83cvzNvB60PP60fs+mHvebBa+qgnyYSHFUUI52DDxj7Lim1r1ivxx7wp0eCmU8e+3632HtRefGFQAlVvZIYVlO2eNBDjtRpvV67a9jyzGemwtn3Q9b3mfTpZnzlGTZ32hnEEPhpH4GE4dgfXXb3iA3bdrvtu13icJ1W14652DlnsDrlV5/jPReUR06zb9Tu+Jbscdv7LytnWrSlVUZ5RXEp7WLNJJmdbdVONOJDNxDc1qkmfPwm8s4Vq6VvuyqdCnhnpdVi2cRESDS+0e+8I82dpL5D/zxGk0mBiABmCYW3BGJuJqVofEmKluKBQ9ZIXFEo1ZGGDGoQAzPOFEwVTIAgIx3eJqAgNpP2dCDoHptwecbm5hcDwQWX1zfs8flng6MT0wDv+JTHN+n1TY6O+8G6PD4YzMzNMzNZRUUCgsVVPBUIhpYjkZi8HInBWWRFVVVFksKSFAktS4vhKLiAsBheASvFZBAWci4WWcRkBG6wK6sKwDcvuwLyr5kYDGKKFi0ulqAX+VCmzauCOTQwptBAZkQV1S2R3belXQ3hA83hUJwxAS5TZ4XqlrqyvKvwv95Y1XjbV9zkRLecuK2fyDr8CgVXeUtW/AzAnU6lLGFsrOfy+bxlp8o4fz+DbDaXyaxtRyqdhd0y2dz6Rn5trQInm839ARUmCJUCBOfpAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/65b20128bca82aa948cea695376be35a/e2fc5/image.png","srcSet":"/static/65b20128bca82aa948cea695376be35a/00d8a/image.png 80w,\n/static/65b20128bca82aa948cea695376be35a/acbde/image.png 159w,\n/static/65b20128bca82aa948cea695376be35a/e2fc5/image.png 318w,\n/static/65b20128bca82aa948cea695376be35a/d5750/image.png 636w","sizes":"(min-width: 318px) 318px, 100vw"},"sources":[{"srcSet":"/static/65b20128bca82aa948cea695376be35a/bf23d/image.avif 80w,\n/static/65b20128bca82aa948cea695376be35a/d1ae9/image.avif 159w,\n/static/65b20128bca82aa948cea695376be35a/441d0/image.avif 318w,\n/static/65b20128bca82aa948cea695376be35a/98d6c/image.avif 636w","type":"image/avif","sizes":"(min-width: 318px) 318px, 100vw"},{"srcSet":"/static/65b20128bca82aa948cea695376be35a/ec964/image.webp 80w,\n/static/65b20128bca82aa948cea695376be35a/67f7d/image.webp 159w,\n/static/65b20128bca82aa948cea695376be35a/e63c5/image.webp 318w,\n/static/65b20128bca82aa948cea695376be35a/31012/image.webp 636w","type":"image/webp","sizes":"(min-width: 318px) 318px, 100vw"}]},"width":318,"height":320}}}}]},"markdownRemark":{"id":"6eb63b89-205b-5639-8fbd-9bf3662282a3","excerpt":"kubernatis(以降k8s…","html":"<p>kubernatis(以降k8sと表記)を試しに使ってみたい、触って慣れたとなった時に、普通ならローカル環境に構築してあれやこれやとやるのですが、それだと環境がグチャグチャになってわけが分からない状態になったりします。(よく理解していないで試行錯誤していると特に。)</p>\n<p>そんな時に、play-with-k8sというサイトを使うと<strong>ブラウザだけでk8sを構築して使うことができます</strong>。文字通りk8sで遊べます。ここでは基本的な使い方、遊び方を紹介します。</p>\n<h3>サイトログイン</h3>\n<p>まず、<a href=\"https://labs.play-with-k8s.com\">https://labs.play-with-k8s.com</a>にアクセスします。</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67cb186f48351e48338c1248b3c581bf/acb51/image-1018x1024.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.41666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC5ElEQVR42nWTW0gUURjHfe0xCHopMOhGEQj1EPXWS9Bbz0FUkmVKGpU+ZFEQEkRFoFQGIpWJVpaBpam76+p6aTXX0t3Uvbk7c87MnJlzZmZn75J9s+t13YU/M+d85/ud813OKVJ1Q6aawvStIlQjBZYAAbAIfliiAmFrgiknUCRRTWO6blrCmWmOj8z0IplpAqGizLIyF4jJwPi9VX7ZTQI8i0RWlja4USUHFmRGFDiHtfSRM/eFg+X40DV84jZ69pnMh6isrPN5YDEDV76QgNlbhh591F71RI5UCgeu4rMPxYUwlekKnwuDVWHsb5CWXMdlDcqwO/G6N/LWYvS74vUd2p7LqNepQPxYygdDqprOfkwouy6iskalfSj6bSJu/ZPoGI4+aFN3nucbvspGhKG8MFjjUbW+XTpcgdsGjTZ71OFJTPlTrTbj+2TsZK144akIhcSkABwz1CefyKEKoaqJttqiLQPGG4vxzmqeXFIllDdK0Lz8sLBas0vPxR3nuMedWrczBjlD2MWl/Kk7GMqh5C3YWtpUZUFET9/Dx26I+6+g4lJ0/JZ4tBqPzJjVyia8AaaapKhwXVaDp6rGxj2sukmqaSY1zRJ07otDhoAzJN0EUzXiD/HeQAh42AUuMzhxCOs6JURQVbjEMlNXOgTiBZIdmLAaiTp/TVvtjj6LfXrGM/V7tqfPYrGPOF1um8NpGRrvHxwdGHQMOsaGR38O2Ib6rfYB2/Cka0bVo2bOWFKQKAM2O+f1BcOeBb9/kcMICRgF/L5gMDDnDYAFopv3BUHBMAJByJmCZcLgsASmEC8u8kKQw2Nu3uLirNPhUTe/CEYOmwoj+IqyKmWe6qZqQ86wEfTDh+i+Ov/2m75tlQu7a71zYUqZajKKqYIPI/uwQgK92yXWdIrVH8S6LsJJ0JH1i1AQzgq2j8djOiNLS0vLy8tGNJ7jswInU+lEMrVVkVgSPIx4KpH+l0zn8Umm0v8B4a8IQaY13WoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/67cb186f48351e48338c1248b3c581bf/85704/image-1018x1024.webp 240w,\n/static/67cb186f48351e48338c1248b3c581bf/2d484/image-1018x1024.webp 480w,\n/static/67cb186f48351e48338c1248b3c581bf/ac99e/image-1018x1024.webp 960w,\n/static/67cb186f48351e48338c1248b3c581bf/c4729/image-1018x1024.webp 1018w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/67cb186f48351e48338c1248b3c581bf/74bfa/image-1018x1024.png 240w,\n/static/67cb186f48351e48338c1248b3c581bf/b3a52/image-1018x1024.png 480w,\n/static/67cb186f48351e48338c1248b3c581bf/97137/image-1018x1024.png 960w,\n/static/67cb186f48351e48338c1248b3c581bf/acb51/image-1018x1024.png 1018w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/67cb186f48351e48338c1248b3c581bf/97137/image-1018x1024.png\"\n            alt=\"image 1018x1024\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>トップ画面</p>\n</figcaption>\n</figure>\n<p>そこでLoginボタンを押すとアカウント選択画面になりますので、Github認証かDocker認証でログインしてください。もしこれらのアカウントが無いのであれば別途作成する必要があります。（各サイトで作成してください。無料です。）</p>\n<h4>nodeを作成する</h4>\n<p>k8sのnodeを作成します。k8sは複数node使ってこそなのですが、今回は簡単のため、主と従の最小二つ構成で説明しようと思います。</p>\n<p>作成方法は至って簡単で、左上のボタンをクリックするだけです。数秒で出来ますので、二つ作成しましょう。</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 465px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/183b9893e0495b70fe2f820f1c965990/21e5a/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.16666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB90lEQVR42o2RW2/SYBiA+SXeKjHGZLorb4wuEjfjEGE9t3yllGEpOmqaQEM5LDEeLoYxkeAfMLvw3t/gEimOQ1w2yi6WrNMQYIFCL+g+IETtXLInT7+b5un35q2rVCoRBLHOh0FURDdUWkhA0Y0MKcpU7CUdk7gwH+F5iqI0TbNtu9/vm3Ncr16/wTGMZyhEkD1K0ZfIB+LKg/Snx/K7gKg8TH4AgOUAwFF0Fg+HQ2uOi30h+RkWYTkfL64IyioX97HRR7y0GhKfcMJKTFljwwgX8eKkplWc8VsBNJCbP4jFXWyhhi/UIkvVdU8t6qkKy9XQ3Rp8hS/+JG5/fXprVys74y/ZxLH3ygl23UDcBn7DeHbPEO4bcY/xfNng7hhrV48Rdwe99s3rrpa/w3j0d/yxWAwgCGBDdBAwwSBDkVMJhiQYmmIAgIY4DsGwSuXc2O8LBbiwjJpOJZNQURTh8uFu6SkkQcBVF7a2An5/uXxu7M/b25Is5zY3M/kcVM1mlXRaUdXUhCRUUVL5fE6SEvV63Rmb7XZH12e2m81Oq9WF6rrZ748sazRlMBjAE/5h619cvUajd3j4W9dPDg4m7u8bzeavnZ1Rtwvvscdjew78hDM+PTo61fVeq9Wb3jk7u3t7lmmOJ+0f/hPDx74cF8dwPIeXiM8A0js7QqalWnUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/183b9893e0495b70fe2f820f1c965990/85704/image-1.webp 240w,\n/static/183b9893e0495b70fe2f820f1c965990/a8fe7/image-1.webp 465w\"\n              sizes=\"(max-width: 465px) 100vw, 465px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/183b9893e0495b70fe2f820f1c965990/74bfa/image-1.png 240w,\n/static/183b9893e0495b70fe2f820f1c965990/21e5a/image-1.png 465w\"\n            sizes=\"(max-width: 465px) 100vw, 465px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/183b9893e0495b70fe2f820f1c965990/21e5a/image-1.png\"\n            alt=\"image 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>インスタンス作成ボタン</p>\n</figcaption>\n</figure>\n<h4>masterセットアップ①（必須）</h4>\n<p>主となるノードをひとつ選び、masterとして初期セットアップします。右側の黒いコンソール画面に、以下のコマンドを入力してEnterします。</p>\n<pre><code>kubeadm init --apiserver-advertise-address $(hostname -i)\n</code></pre>\n<p>しばらく待つ（数分）と処理が完了し、以下のような画面になります。これでk8sのmasterがまず準備されました。この時、コンソールの下のほうの、「kubeadm join」から始まる部分を探してください。そしてその行をコピーしてください（画面幅によって、\"\\\"で改行されている場合がありますので場合によっては複数行になるかもしれません）。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8802e3ed649bb1abdce25ac649c07ede/abbfe/image-1024x517.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVR42mOoiQ6qTUsuC/M/vXfn33//P3/+/OXLl79///4nBP79+8cwv7lyYUvVnJqii2dOfvr2/f27d9++ffv+/ftPGIBwf/369RMV/Pjxg+HT91/vv3z78vf/ryd3/r168g9k5F+gqUTZ/PnTl8+fPgI5c/u7A1yd4hISY6KhIDIyMiIiAkgC2eHh4UFBQf7+/n5+fl5eXm5ublFRUQxAbb9//waShSUlDAwMgoKCPDw83NzcHBwcrKysLCwsQJKZmRnIAJKMjIxANRBSQkICobmoqBAoKioqKgAGnJyc7OzsQCPY2NiYUQHQIKBmaWlphOb8/HygkLCwMNBmPj4+Li4uoDomJiaIPcgAi82FhYUQzYJgANTPy8sLtBmiHwKYwABoKFCllJQUus1AC4HuhHiVBQwg9kMcDNcPVCkpKYnQ3NbWpqKiYmBgoKmpqaampgwGQBE4AwgUwUBJSUlWVtbMzAwAkKsK28bnJegAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8802e3ed649bb1abdce25ac649c07ede/85704/image-1024x517.webp 240w,\n/static/8802e3ed649bb1abdce25ac649c07ede/2d484/image-1024x517.webp 480w,\n/static/8802e3ed649bb1abdce25ac649c07ede/ac99e/image-1024x517.webp 960w,\n/static/8802e3ed649bb1abdce25ac649c07ede/d757a/image-1024x517.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8802e3ed649bb1abdce25ac649c07ede/74bfa/image-1024x517.png 240w,\n/static/8802e3ed649bb1abdce25ac649c07ede/b3a52/image-1024x517.png 480w,\n/static/8802e3ed649bb1abdce25ac649c07ede/97137/image-1024x517.png 960w,\n/static/8802e3ed649bb1abdce25ac649c07ede/abbfe/image-1024x517.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8802e3ed649bb1abdce25ac649c07ede/97137/image-1024x517.png\"\n            alt=\"image 1024x517\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4>slaveセットアップ① （必須）</h4>\n<p>上でコピーしたものを使って、masterのk8sに紐づく形で\"従\"のk8sのnodeをセットアップします。</p>\n<p>まず左側でmasterとしたのとは別のnodeを選択します。そしてそこのコンソールに上でコピーした「 kubeadm join ～」を貼り付けてEnterします。</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d499b607563b4e75c74c650e58b63243/abbfe/image-2-1024x341.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuElEQVR42p2Q3RKCIBBGRQQUBPkZhSxKpHz/R2y1mqmmC6cDsxfMnvmWLZZlSSnN8xxPcfBDOAS41lhjjHNOqQ5jXAG4Kj9BCBXnSwyjBw1arVsdo7WzttuQUrYbQgj6BmOUkKrQvUK0+JOUpz7YR4jutHyhtYZHpdQzum1h/m95mtLtupJzjuc4juNxY/AePgN20zR1XZe4/JEcQgABWq01aoNzTgjZNTbMJvh6ANgKVEYZbHePfAfXdA/cq4gM8gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d499b607563b4e75c74c650e58b63243/85704/image-2-1024x341.webp 240w,\n/static/d499b607563b4e75c74c650e58b63243/2d484/image-2-1024x341.webp 480w,\n/static/d499b607563b4e75c74c650e58b63243/ac99e/image-2-1024x341.webp 960w,\n/static/d499b607563b4e75c74c650e58b63243/d757a/image-2-1024x341.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d499b607563b4e75c74c650e58b63243/74bfa/image-2-1024x341.png 240w,\n/static/d499b607563b4e75c74c650e58b63243/b3a52/image-2-1024x341.png 480w,\n/static/d499b607563b4e75c74c650e58b63243/97137/image-2-1024x341.png 960w,\n/static/d499b607563b4e75c74c650e58b63243/abbfe/image-2-1024x341.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d499b607563b4e75c74c650e58b63243/97137/image-2-1024x341.png\"\n            alt=\"image 2 1024x341\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>kubeadm join 実行後</p>\n</figcaption>\n</figure>\n<p>これで\"従\"のnodeのセットアップは完了です。試しに、masterのnodeに戻って以下のコマンドを打ってください。すると、k8sが認識している二つのnodeが表示されるはずです。</p>\n<pre><code>kebectl get nodes\n</code></pre>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 421px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c232edcd552873443359558d529d68d8/3609d/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVR42h2N23aEIAxFg1bLFMdWXLpERHGAAbm0Y///44o9D+chyd4BJWWNMeeMTdNxPI3ahdw+aW+d7XrKxeqdnaYRAOUAQPEfhK4GXFdFWWpjUooxfQ89zRcfhITgY4rLzIqipLT/SZHcSF6tck8xaKmis9CSe1Zaa93htFY++KZp3qoqxPhUZl1Ffodv+Hy92vaeYbEtbGZiYZtYoKcdILAXfdX5e3ZfeYIeu/HWKP3I6vo9uw6xiAxzwYdxmOeRM/YHAOwVpjW412QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c232edcd552873443359558d529d68d8/85704/image-3.webp 240w,\n/static/c232edcd552873443359558d529d68d8/c63f9/image-3.webp 421w\"\n              sizes=\"(max-width: 421px) 100vw, 421px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c232edcd552873443359558d529d68d8/74bfa/image-3.png 240w,\n/static/c232edcd552873443359558d529d68d8/3609d/image-3.png 421w\"\n            sizes=\"(max-width: 421px) 100vw, 421px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c232edcd552873443359558d529d68d8/3609d/image-3.png\"\n            alt=\"image 3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>masterで見ると、二つのnodeが管理されているのが分かる</p>\n</figcaption>\n</figure>\n<p>もし、二つより多くのnodeで試したい場合は本節の「 kubeadm join ～」を各nodeで繰り返し実行してください。</p>\n<h4>masterセットアップ② （必須）</h4>\n<p>次にk8sのネットワーク設定を行います。k8sでは設定ファイルで設定を適用できますので、ここでは公開されている設定ファイルを用いて、設定を適用しています。</p>\n<p>masterとしたnodeで、下記コマンドを貼り付けて実行してください。</p>\n<pre><code>kubectl apply -n kube-system -f \"https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 |tr -d '\\n')\"\n</code></pre>\n<h4>masterセットアップ③ （任意）</h4>\n<p>現在は何もないただの環境なので、アプリケーションを入れて動作するのを見てみようと思います。ここではnginxというwebサーバを設定します。</p>\n<p>これも設定ファイルのサンプルが公開されているので、それを適用しています。masterとしたnodeで、下記コマンドを貼り付けて実行してください。</p>\n<pre><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/nginx-app.yaml\n</code></pre>\n<p>確認として、以下のコマンドを実行して「my-nginx-svc」が表示されていれば成功です。</p>\n<pre><code>kubectl get service\n</code></pre>\n<h4>masterセットアップ④（任意）</h4>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0697b88cf934bb9e24cbced3d3c0d5ef/abbfe/image-8-1024x525.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVR42o3PyUrDQACA4UnMMpN0moRmIRFt7AN58+KhB0EQiydRPCt68ORBpVVQUPpKUnqVpuqhS5amzdI6TV0Ql/oxDHOYfxZwvL56slk+LK9Vd7c83/c8Mvmu6yZJMpkHnO9VLvcrZzsb96dHHS/oe14QBEkmjuPk3XAYRlGUfAW6fthx/V448gbhuNOexNHk30Cv7z88PrvBoPvyVD/Yvq9e3NXrtzdTtVrt6hfXGZCO0/5o+j3HaauLS7l8XhQFhBDHcWAukqVpmsXOil00TdOyLMMwChlBEJhvFjI0TX/GbcdZLhbVDMYYIsSS23meh5Bl2VnGZmaLt3g8i1utkm0bmqaTWBQLiqJIUh7yiOfJdpqi/np2q9GwdZ1casiyhnFBFDUs2FhUs7VEnsAwiGUhOeiHuNksWZYuy6aiqLmcDKGMkAGhKQgShJjjGABYiiLjI34FN6Eb9e1+7CwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0697b88cf934bb9e24cbced3d3c0d5ef/85704/image-8-1024x525.webp 240w,\n/static/0697b88cf934bb9e24cbced3d3c0d5ef/2d484/image-8-1024x525.webp 480w,\n/static/0697b88cf934bb9e24cbced3d3c0d5ef/ac99e/image-8-1024x525.webp 960w,\n/static/0697b88cf934bb9e24cbced3d3c0d5ef/d757a/image-8-1024x525.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0697b88cf934bb9e24cbced3d3c0d5ef/74bfa/image-8-1024x525.png 240w,\n/static/0697b88cf934bb9e24cbced3d3c0d5ef/b3a52/image-8-1024x525.png 480w,\n/static/0697b88cf934bb9e24cbced3d3c0d5ef/97137/image-8-1024x525.png 960w,\n/static/0697b88cf934bb9e24cbced3d3c0d5ef/abbfe/image-8-1024x525.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0697b88cf934bb9e24cbced3d3c0d5ef/97137/image-8-1024x525.png\"\n            alt=\"image 8 1024x525\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>ロードバランサに外部IPアドレスを設定している所</p>\n</figcaption>\n</figure>\n<p>対象のサービスに外部IPアドレスを指定して、アクセスできるようにします。slaveのnodeに記載されているIPアドレスに以下のXX部分を書き換えてmasterのnodeで実行します。（上記画像の例だと192.168.0.27となるようにします。）</p>\n<pre><code>kubectl patch svc my-nginx-svc -p '{\"spec\": {\"type\": \"LoadBalancer\", \"externalIPs\":[\"192.168.0.XX\"]}}'\n</code></pre>\n<p>確認として、以下のコマンドを実行して「my-nginx-svc」のEXTERNAL-IPに指定したIPアドレスが表示されていれば成功です。</p>\n<pre><code>kubectl get service\n</code></pre>\n<p>これでnginxアプリに接続できるはずなので、slaveのnodeからcurlコマンド（URLにアクセスするコマンド）を実行してみます。下記を指定したIPアドレスに変更して実行してください。するとHTMLがコンソールに出力されるはずです。</p>\n<pre><code>curl htttp://192.168.0.XX\n</code></pre>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0028fd3217d34174ff5b2cf1a5705600/abbfe/image-5-1024x796.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEUlEQVR42oWRX2/SYBTG3/5vaUspyKLfwi/gpXfTG290Aq4LEWGamZloduHFPoPXJovEbLAx2DTu1nhh4ofwyqhtwRZKVyiF4uEtIy5S/eXtafMmzznPeYrub+3cffry3vbunY3y2+qbwWDQbrc7nY5pmoZhOE4/DMNJDOjD2o33xdWzh7dat69/2Xs1CKee6wZBMPSHvu+Px+NpPGj3+fbO1uaLJ5Vnj4qtes07P3ccx/M8UMZpYCYYnIm/G+a3n7re+WVatt1zuoOh1eu1zZl124Yru9vt+v4ouAy0hoqCYBIEI1gMOo0tIzx7Pf3xddY/nEz/B9L1tmHotmWNRsHnTx+LqzfL2oPK5uNKuVwqlTRN28Bo6+tQ8/l8oVDI5XJrGOS6fReefh867R8cIIRolqMoiqZpagFJRm8CgxZEBqJU352eKJJ4bWXlajYLJ5tOJ0VRFkWoiiTBkQSBp2mGnoPm20biZlNVFEWWBY6LDk0QFEJUVBEiwRdCzNLJjVqNFwRZlnkeBtAkSaK/ILB+iXi/WoWbNLhNJjmOYxiGZdmozkz+W9w6OhIlKcom2gqHdSktkiCW2z5pNGCmqqqZTAZqIpGAFSAmDgPzOZ4HJ8snNw8PQZDFXMGkVTWlKBDBYv9Y28f1uijL6UxGSaVUTBKUgvDnvyXi0gbbsiBAXCzsTBBwGFznHxf/iboQ/wYlj8Bx1JkO7wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0028fd3217d34174ff5b2cf1a5705600/85704/image-5-1024x796.webp 240w,\n/static/0028fd3217d34174ff5b2cf1a5705600/2d484/image-5-1024x796.webp 480w,\n/static/0028fd3217d34174ff5b2cf1a5705600/ac99e/image-5-1024x796.webp 960w,\n/static/0028fd3217d34174ff5b2cf1a5705600/d757a/image-5-1024x796.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0028fd3217d34174ff5b2cf1a5705600/74bfa/image-5-1024x796.png 240w,\n/static/0028fd3217d34174ff5b2cf1a5705600/b3a52/image-5-1024x796.png 480w,\n/static/0028fd3217d34174ff5b2cf1a5705600/97137/image-5-1024x796.png 960w,\n/static/0028fd3217d34174ff5b2cf1a5705600/abbfe/image-5-1024x796.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0028fd3217d34174ff5b2cf1a5705600/97137/image-5-1024x796.png\"\n            alt=\"image 5 1024x796\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>nginxアプリがデフォルトのhtmlをレスポンスした状態。</p>\n</figcaption>\n</figure>\n<h3>まとめ</h3>\n<p>一通り、最小限のk8sの構成方法について説明しました。masterセットアップ②まで実施してもらえれば、構築完了なので、種々のコマンドの実験や動作練習ができます。</p>\n<p>ブラウザだけでk8sを触れる大変便利な環境なので、皆さんもぜひとも活用してください。</p>\n<h3>URL</h3>\n<p><a href=\"https://labs.play-with-k8s.com/\">https://labs.play-with-k8s.com/</a></p>","fields":{"slug":"/posts/labs-play-with-k8s-com/"},"frontmatter":{"title":"ブラウザで簡単にkubernatesで遊ぼう（labs.play-with-k8s.com）","date":"2019/12/17","dateModified":null,"description":null,"category":null,"categories":["information-technology"],"tags":["k8s","kubernates"]}},"mdPrevious":{"fields":{"slug":"/posts/jjug-night-2022-01-27/"},"frontmatter":{"title":"【オンライン】 JJUGナイトセミナー「開発環境の最前線」","category":null,"categories":["event-report"]}},"mdNext":{"fields":{"slug":"/posts/jjug-dapr/"},"frontmatter":{"title":"JJUGナイトセミナー「Dapr特集」のまとめ","category":null,"categories":["event-report"]}}},"pageContext":{"id":"6eb63b89-205b-5639-8fbd-9bf3662282a3","previousPostId":"ce1c6863-2ab0-5827-9dde-93f459ec3297","nextPostId":"bf82afc4-8b21-5a1c-a480-68a3e555f506","imagePath":"posts/labs-play-with-k8s-com/images/image.png"}},"staticQueryHashes":["3695098706","798193786"],"slicesMap":{}}