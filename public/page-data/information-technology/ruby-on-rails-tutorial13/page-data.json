{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/information-technology/ruby-on-rails-tutorial13","result":{"data":{"blogImage":{"edges":[]},"oldBlogImage":{"edges":[{"node":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABY0lEQVR42o2RO0sDURCFjwg+sImKYKGgQbEQrO3s1MK/IBLBR+GzM6KFdv4BixAUC5sINoYlIWgKRddHvEENK9qEtAp2IkGM32Wz/S4czsy9M2fmnpXqX01qAI0vUpOFK43eSp3XUgdoDWoU5gsKKzQWpJ17ySBaI/58kAognpcioUWzUhvbDN9J+yV6XqVfRM/IY4hNwKvk64aa0KJsc/RGrfE3S/DknkepC7HeFFawYQtDp0C3tcZacSm1B3ZYprdPjtRstyCpWjHirycpilCU+IPNSvABmAMeeZG7TeIsyDE8ZgU5d0BZHI4j5Jr6duR5OELTEAUV6ymbugxJEe9yd2z8OAOuwKwVpO8COMKzQTz78aS/MoLk6QzPIe4nrr77g5a43ytSg/A39Qnyczj3LJ0yfAwrlok93UgjHBzaHwKSII4fA9YrsM3UGXiFbRfgSe6nwTzna5wtwifwFrwBkv88a6ISrfBeGAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/634ab64040a53a712324c8e22185c320/e0c1f/Ruby_On_Rails_Logo.svg.png","srcSet":"/static/634ab64040a53a712324c8e22185c320/658d4/Ruby_On_Rails_Logo.svg.png 212w,\n/static/634ab64040a53a712324c8e22185c320/ae6b9/Ruby_On_Rails_Logo.svg.png 425w,\n/static/634ab64040a53a712324c8e22185c320/e0c1f/Ruby_On_Rails_Logo.svg.png 849w,\n/static/634ab64040a53a712324c8e22185c320/8cd4d/Ruby_On_Rails_Logo.svg.png 1698w","sizes":"(min-width: 849px) 849px, 100vw"},"sources":[{"srcSet":"/static/634ab64040a53a712324c8e22185c320/fe879/Ruby_On_Rails_Logo.svg.avif 212w,\n/static/634ab64040a53a712324c8e22185c320/06dee/Ruby_On_Rails_Logo.svg.avif 425w,\n/static/634ab64040a53a712324c8e22185c320/9b7e6/Ruby_On_Rails_Logo.svg.avif 849w,\n/static/634ab64040a53a712324c8e22185c320/3736e/Ruby_On_Rails_Logo.svg.avif 1698w","type":"image/avif","sizes":"(min-width: 849px) 849px, 100vw"},{"srcSet":"/static/634ab64040a53a712324c8e22185c320/3dc52/Ruby_On_Rails_Logo.svg.webp 212w,\n/static/634ab64040a53a712324c8e22185c320/c1eed/Ruby_On_Rails_Logo.svg.webp 425w,\n/static/634ab64040a53a712324c8e22185c320/b1f6f/Ruby_On_Rails_Logo.svg.webp 849w,\n/static/634ab64040a53a712324c8e22185c320/94a6b/Ruby_On_Rails_Logo.svg.webp 1698w","type":"image/webp","sizes":"(min-width: 849px) 849px, 100vw"}]},"width":849,"height":320}}}}]},"markdownRemark":{"id":"4950741e-f6c9-5739-89c5-09bbf3ea8fe4","excerpt":"第13章の実績 第13章 ユーザーのマイクロポスト を実施しました！ 実施時間: 4.5時間 学べたこと モデルの関連付け 「rails generate model Micropost content:text user:references」とするだけで、\"Micropost…","html":"<h2>第13章の実績</h2>\n<p><a href=\"https://railstutorial.jp/chapters/user_microposts?version=5.1#cha-user_microposts\">第13章 ユーザーのマイクロポスト</a> を実施しました！<br>\n実施時間: 4.5時間</p>\n<h3>学べたこと</h3>\n<ul>\n<li>\n<p>モデルの関連付け<br>\n「rails generate model Micropost content:text user:references」とするだけで、\"Micropost\"と\"User\"のモデルが１対１の関係であることを関連づけられました。コード上では、Micropostクラスに\"belongs_to :user\"と表現されています。</p>\n</li>\n<li>\n<p>1対多のモデルの関連付け<br>\n上記とは逆に、1対多の関係の関連付けは、「has_many」をモデルに記述することで表現します。ただしこれは上記と違ってコマンドで自動生成されないので手入力が必要なようです。</p>\n</li>\n<li>\n<p>デフォルトスコープ<br>\n次の記述をすることで、DBからの取得時の標準の出力結果を指定できます「default_scope -> { order(created_at: :desc) }」。この記述は、\"<br>\ncreated_at\"列を降順（descending）の順序（order）で取得することを表します。</p>\n</li>\n<li>\n<p>dependent: :destroy<br>\nこの記述をすることで、依存しているモデルが削除された時に紐づくモデルも連なって削除されます。チュートリアルの例では「ユーザーが削除されたときに、そのユーザーに紐付いたマイクロポストも一緒に削除される」こととなります。</p>\n</li>\n<li>\n<p>（おまけ）それっぽいテストデータを作ってくれるFakerというライブラリが面白い。何章か前からユーザ名や今章ではマイクロソフトの投稿のサンプルとして使っていますが、他にも色々な種類のテストデータがあります。 <a href=\"https://github.com/stympy/faker\">Fakerのドキュメント</a> (英語) を見ると、<a href=\"https://github.com/stympy/faker#japanese-media\">Japanese Media</a>にはDragonBallやOnePiece、SwordArtOnlineがあり、ドラゴンボールやワンピースは分かりますが、ソード・アート・オンラインが並ぶというのは中の人に好きな人でもいるのでしょうか？（笑）</p>\n</li>\n</ul>\n<h3>独自にやったこと</h3>\n<h4>ImageMagickインストール</h4>\n<p>Windowsについての導入手順が載っておらず、以下のURLリンクが貼ってあるのみでした。<br>\n<a href=\"http://www.imagemagick.org/script/download.php#windows\">http://www.imagemagick.org/script/download.php#windows</a></p>\n<p>しかも、簡単には上手くいかず、上記を単純にインストールしただけだと、以下のように「Picture Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: ImageMagick/GraphicsMagick is not installed」というエラーが発生して画像のアップロードが上手くいきません。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ffa24e58bcd9a23a758bb53ad5b49959/abbfe/image-13-1024x487.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVR42pVRy0rEQBDM5yUYTI75hjUI+yMevIgHT/6BhxUFD/6CIOuCwpIXCWsmCdmZSdKTbidRUZYNq0UzTDNdVUO1cTqfn8xmnudZlmXb9tE0jkc4juO6rmmavu8bz4tFmKQbViKi6hGJ6rrO85wx1rZt/wvqGwBARHrAqIKwes9lvcUOhgLQKr1WGXT24/OpLEtDZtl2veZBKOJYRJFuaZq2SybOKYooiSkMKEmo7egQfsiCC9AlJQgJTQOg8O/OO6OI+A/y1cPq7Obp4m55ef9yfru8fnwFpcaJSaZOXl+KojCiLH8L05TVm0ow3pUSDhl/OUspx28PDZLej5R90+oIlGhUsz85vXwhhD6VUh9CYR7nrwT6BwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ffa24e58bcd9a23a758bb53ad5b49959/85704/image-13-1024x487.webp 240w,\n/static/ffa24e58bcd9a23a758bb53ad5b49959/2d484/image-13-1024x487.webp 480w,\n/static/ffa24e58bcd9a23a758bb53ad5b49959/ac99e/image-13-1024x487.webp 960w,\n/static/ffa24e58bcd9a23a758bb53ad5b49959/d757a/image-13-1024x487.webp 1024w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ffa24e58bcd9a23a758bb53ad5b49959/74bfa/image-13-1024x487.png 240w,\n/static/ffa24e58bcd9a23a758bb53ad5b49959/b3a52/image-13-1024x487.png 480w,\n/static/ffa24e58bcd9a23a758bb53ad5b49959/97137/image-13-1024x487.png 960w,\n/static/ffa24e58bcd9a23a758bb53ad5b49959/abbfe/image-13-1024x487.png 1024w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ffa24e58bcd9a23a758bb53ad5b49959/97137/image-13-1024x487.png\"\n            alt=\"image 13 1024x487\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>けれど、先人で解決している人がおり、こちらの方法で上手くいきました。</p>\n<p><a href=\"http://tomokiit.hatenablog.jp/entry/rails-curriewave-rmagick\">http://tomokiit.hatenablog.jp/entry/rails-curriewave-rmagick</a></p>\n<h2>参考</h2>\n<h3>環境</h3>\n<ul>\n<li>ruby: 2.3.3</li>\n<li>ruby on rails: 5.1.4</li>\n<li>OS: Windows 10 (64bit)</li>\n<li>IDE: IntelliJ ULTIMATE 2018.1</li>\n<li>リポジトリ：GitHub</li>\n</ul>\n<p><a href=\"https://github.com/nisioka/RubyOnRailsTutorial/tree/static-pages\">https://github.com/nisioka/RubyOnRailsTutorial/tree/static-pages</a></p>\n<h3>リンク</h3>\n<ul>\n<li><a href=\"https://railstutorial.jp/chapters/user_microposts?version=5.1#cha-user_microposts\">第13章 ユーザーのマイクロポスト</a></li>\n<li><a href=\"http://tomokiit.hatenablog.jp/entry/rails-curriewave-rmagick\">http://tomokiit.hatenablog.jp/entry/rails-curriewave-rmagick</a></li>\n</ul>\n<p>【スポンサードリンク】</p>\n<p><a href=\"//af.moshimo.com/af/c/click?a_id=1184149&#x26;p_id=1024&#x26;pc_id=1450&#x26;pl_id=15158&#x26;guid=ON\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; margin-left: initial;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAME/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgED/9oADAMBAAIQAxAAAAHTLBRnSgKlE3zkJf/EAB4QAAIBAwUAAAAAAAAAAAAAAAECAAMEERITFCMy/9oACAEBAAEFArnuAouQ1qgOamnfecl43kQz/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAS/9oACAEDAQE/AS3/AP/EABkRAAIDAQAAAAAAAAAAAAAAAAABEBETUf/aAAgBAgEBPwGmZPoo/8QAHhAAAgEDBQAAAAAAAAAAAAAAAAEhAhBBERIxMoH/2gAIAQEABj8Co2YkgetLOzFPBg8v/8QAHhAAAgICAgMAAAAAAAAAAAAAAAERITFBUWFxgaH/2gAIAQEAAT8h0C2QwJU75LCDc0xoWUpbUktIdXn6Oe5ejJ4Gxmf/2gAMAwEAAgADAAAAEKswwv/EABgRAAMBAQAAAAAAAAAAAAAAAAABERBR/9oACAEDAQE/EHLWTwef/8QAGBEAAgMAAAAAAAAAAAAAAAAAARARITH/2gAIAQIBAT8QEFLYK//EAB4QAQACAgIDAQAAAAAAAAAAAAEAESExQXFhgdHw/9oACAEBAAE/EDSWxUmE1VXMdmKXuLV1EQAeCmUSNRQs4t94lNsQDcNOXZhnluVV9n7viadJr6n/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ddaf472285e789e7884d348863e39b75/85704/000000015158.webp 240w,\n/static/ddaf472285e789e7884d348863e39b75/577d7/000000015158.webp 300w\"\n              sizes=\"(max-width: 300px) 100vw, 300px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ddaf472285e789e7884d348863e39b75/bda9e/000000015158.jpg 240w,\n/static/ddaf472285e789e7884d348863e39b75/622f1/000000015158.jpg 300w\"\n            sizes=\"(max-width: 300px) 100vw, 300px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ddaf472285e789e7884d348863e39b75/622f1/000000015158.jpg\"\n            alt=\"000000015158\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></a></p>\n<p><a href=\"//af.moshimo.com/af/c/click?a_id=1124058&#x26;p_id=936&#x26;pc_id=1196&#x26;pl_id=21425&#x26;guid=ON\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; margin-left: initial;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAUCAQT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAaTxasopgj5NZ6D/xAAbEAACAgMBAAAAAAAAAAAAAAABAgAUAxARIf/aAAgBAQABBQJeLkACog8uKTbEvrDv/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/AWd//8QAFhEBAQEAAAAAAAAAAAAAAAAAEgAQ/9oACAECAQE/ATHf/8QAHhAAAQMEAwAAAAAAAAAAAAAAAQACMxASIZEgQaH/2gAIAQEABj8Ce68ZTxfk90jO1H6FGd8P/8QAHRABAAICAgMAAAAAAAAAAAAAAQARMVEQIXGR0f/aAAgBAQABPyEtEtjVErw7PCCVEa1BivQjsSA+CZPP/9oADAMBAAIAAwAAABCzxz7/xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8QMv8A/8QAGREAAgMBAAAAAAAAAAAAAAAAADEBEBFR/9oACAECAQE/EEN8IVf/xAAgEAEAAgEDBQEAAAAAAAAAAAABABEhMUGBEGFxocHw/9oACAEBAAE/EEldL2zHH2Z9S1K5GvFwfpY7BgHatuzvbcght6G6bzLSsrf4J7z1/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/cf4742f70fca60ff5429b3bbd338f6a1/85704/000000021425.webp 240w,\n/static/cf4742f70fca60ff5429b3bbd338f6a1/577d7/000000021425.webp 300w\"\n              sizes=\"(max-width: 300px) 100vw, 300px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/cf4742f70fca60ff5429b3bbd338f6a1/bda9e/000000021425.jpg 240w,\n/static/cf4742f70fca60ff5429b3bbd338f6a1/622f1/000000021425.jpg 300w\"\n            sizes=\"(max-width: 300px) 100vw, 300px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/cf4742f70fca60ff5429b3bbd338f6a1/622f1/000000021425.jpg\"\n            alt=\"000000021425\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></a></p>","fields":{"slug":"/posts/ruby-on-rails-tutorial13/"},"frontmatter":{"title":"Ruby on Rails チュートリアルをやってみた【第13章】","date":"2019/03/24","dateModified":null,"description":null,"category":null,"categories":["information-technology"],"tags":["ruby","ruby-on-rails"]}},"mdPrevious":{"fields":{"slug":"/posts/ruby-on-rails-tutorial12/"},"frontmatter":{"title":"Ruby on Rails チュートリアルをやってみた【第12章】","category":null,"categories":["information-technology"]}},"mdNext":{"fields":{"slug":"/posts/saving-a-large-sized-video/"},"frontmatter":{"title":"【重たい動画の保存案】YouTubeがオススメ！","category":null,"categories":["life"]}}},"pageContext":{"id":"4950741e-f6c9-5739-89c5-09bbf3ea8fe4","previousPostId":"a296d786-0bfa-5dbc-b727-4858acb2c7f3","nextPostId":"ab70f90f-6e64-5dd3-a0bb-5e3845bc88a9","imagePath":"posts/ruby-on-rails-tutorial13/images/Ruby_On_Rails_Logo.svg.png"}},"staticQueryHashes":["3695098706","798193786"],"slicesMap":{}}