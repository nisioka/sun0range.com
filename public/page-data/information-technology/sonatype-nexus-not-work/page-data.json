{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/information-technology/sonatype-nexus-not-work","result":{"data":{"blogImage":{"edges":[]},"oldBlogImage":{"edges":[]},"markdownRemark":{"id":"a33a9c0d-30da-54b5-8537-234f90df5a4d","excerpt":"表題の通り、アーティファクト(Maven)リポジトリであるSonatype NEXUSは、OracleのJava 8 Runtime Environment（JRE）が必要だそうです。 以下で公式にガイディングされている通り、OpenJDKでは動きません。 OpenJDK or…","html":"<p>表題の通り、アーティファクト(Maven)リポジトリであるSonatype NEXUSは、OracleのJava 8 Runtime Environment（JRE）が必要だそうです。</p>\n<p>以下で公式にガイディングされている通り、OpenJDKでは動きません。</p>\n<blockquote>\n<p>OpenJDK or other Java distributions or older Java versions are not supported.</p>\n<p>（訳：OpenJDKやその他(Oracle意外)のディストリビューション、古い(Java7以前)のJavaバーションはサポートされていません。）</p>\n<p>引用：<a href=\"https://help.sonatype.com/repomanager3/installation/java-runtime-environment\">https://help.sonatype.com/repomanager3/installation/java-runtime-environment</a></p>\n</blockquote>\n<h2>困ったこと</h2>\n<ul>\n<li>環境のJAVA_HOMEがOpenJDKなど、別のランタイムが導入されている。→対処方法は後述</li>\n<li>他のJREで動かそうとするとゾンビプロセスとなる可能性がある。→再現性は不明ですが、私の環境では当該事象が発生して、killコマンドでも殺せずにサーバ再起動するはめに。</li>\n<li>NEXUSの情報収集がし辛い→スマートフォンのNEXUSが検索に多数引っかかるので、ちゃんと「Sonatype NEXUS」と指定したほうが良い。</li>\n</ul>\n<h2>OpenJDKが使われている場合の対処法</h2>\n<h3>Oracle Javaを導入する</h3>\n<p>OracleJavaでないと動かないのはしょうがないので、インストールします。ことなるディストリビューションのJavaが混在する環境となります。<br>\n導入手順はここでは省きます。</p>\n<h3>NEXUSで使用するJavaのパスを個別指定する</h3>\n<p>NEXUSの起動シェルにJREのパスをオーバーライドできる部分があるので、それを書き換えます。<br>\n対象ファイルパスは、「（NEXUSホーム）/bin/nexus」です。</p>\n<p>「INSTALL4J_JAVA_HOME_OVERRIDE」という変数がどこか（割と上の方）にあるので、それのコメントアウトを外し（先頭の\"#\"を削除）、\"=\"の後にOracle Javaのパスを指定します。</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 551px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d1d68fe646af6e9b6337cd123899f2f4/59470/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.583333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVR42o2Py27CMBBF05gQ2YzjOI4fPApRbALZ5AsqdVEqof7/B3EJ7RZ6dBdXts5oJjudkvOhtW1jTFivGWPZ/+mCC1ojRkoExWvdSumUIs5XRFVVKaWklN57dCKq69oYUxRF9j3E63H4iv3Hdvu53/+M4yXGS0rXlHZEqmn0DDQIzQyKECLP82wY4vk8xhgPXdf3fUppmibrHBcCgaZm6G8FyCh3EwhRMrYAyxksU5bl799L3ncbay0GYySuCiFwzvH+9pSHfAO2ZRMyA7N+BQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d1d68fe646af6e9b6337cd123899f2f4/85704/image.webp 240w,\n/static/d1d68fe646af6e9b6337cd123899f2f4/2d484/image.webp 480w,\n/static/d1d68fe646af6e9b6337cd123899f2f4/62aab/image.webp 551w\"\n              sizes=\"(max-width: 551px) 100vw, 551px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d1d68fe646af6e9b6337cd123899f2f4/74bfa/image.png 240w,\n/static/d1d68fe646af6e9b6337cd123899f2f4/b3a52/image.png 480w,\n/static/d1d68fe646af6e9b6337cd123899f2f4/59470/image.png 551w\"\n            sizes=\"(max-width: 551px) 100vw, 551px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d1d68fe646af6e9b6337cd123899f2f4/59470/image.png\"\n            alt=\"image\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>（変更前）</p>\n</figcaption>\n</figure>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; margin-left: initial;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4d647d6c476c0fdf63887bd07984fd3d/6e03b/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.583333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVR42mMQEpNYtX3Pp///z7z7eeb97ysff1/7/PfZl59SatoMDAyMTEwMeICgqnZG3+ypa7aUtPXkN7YXNnVUdfaXNrUrK6lIcnHJCgrKCQkpiojICQqqS0uLCAvz8fEBSQkJCXZ2dgZtW2cpJVUBIWFBQUEJcXEJCUlJCQkRCQk9cXEzSUlzeXkLeXlzOTljaWkrGRkJAQE+AQF+Pj6gTkZGRgYVJUUdLSDQVFJSUgcDU1NToH4ODg4uTk5BsFJeHh4g4ubi4ufnFxERAZJMEO8wwQAzGEDYIFOJAdLS0uLi4kCfiImJSUlJAT3Dzc0NCipGRiZUhAwgmgHfEy9dfnyL9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4d647d6c476c0fdf63887bd07984fd3d/85704/image-1.webp 240w,\n/static/4d647d6c476c0fdf63887bd07984fd3d/2d484/image-1.webp 480w,\n/static/4d647d6c476c0fdf63887bd07984fd3d/e4a09/image-1.webp 550w\"\n              sizes=\"(max-width: 550px) 100vw, 550px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4d647d6c476c0fdf63887bd07984fd3d/74bfa/image-1.png 240w,\n/static/4d647d6c476c0fdf63887bd07984fd3d/b3a52/image-1.png 480w,\n/static/4d647d6c476c0fdf63887bd07984fd3d/6e03b/image-1.png 550w\"\n            sizes=\"(max-width: 550px) 100vw, 550px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4d647d6c476c0fdf63887bd07984fd3d/6e03b/image-1.png\"\n            alt=\"image 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<figcaption>\n<p>（変更例：Oracle Javaが「/usr/java/jdk1.8.0_121」にある場合）</p>\n</figcaption>\n</figure>\n<h3>NEXUS再起動</h3>\n<p>これで、NEXUSを起動させればOKです。<br>\n「（NEXUSホーム）/bin/nexus start」など。</p>\n<h2>参考</h2>\n<p><a href=\"https://help.sonatype.com/repomanager3/installation/java-runtime-environment\">https://help.sonatype.com/repomanager3/installation/java-runtime-environment</a></p>\n<p><a href=\"/information-technology/adopt-open-jdk9\">Oracle Java8からAdoptOpenJDK9への変更方法</a></p>","fields":{"slug":"/posts/sonatype-nexus-not-work/"},"frontmatter":{"title":"Sonatype NEXUSはOpenJDKだと動かない","date":"2019/01/16","dateModified":null,"description":null,"category":null,"categories":["information-technology"],"tags":["maven","openjdk","sonatype-nexus"]}},"mdPrevious":{"fields":{"slug":"/posts/ruby-on-rails-tutorial14/"},"frontmatter":{"title":"Ruby on Rails チュートリアルをやってみた【第14章】","category":null,"categories":["information-technology"]}},"mdNext":{"fields":{"slug":"/posts/spring-boot_vertion-up_2-7to3-1/"},"frontmatter":{"title":"Spring Bootの2.7系から3.1系へのバージョンアップ対応のハマりどころ","category":null,"categories":["information-technology"]}}},"pageContext":{"id":"a33a9c0d-30da-54b5-8537-234f90df5a4d","previousPostId":"0c304601-2bb9-5858-a78d-97dde8db1140","nextPostId":"96f9d337-c561-5c02-94b1-0685171cfaa0","imagePath":"posts\\sonatype-nexus-not-work\\images\\953px-OpenJDK_logo.svg.png"}},"staticQueryHashes":["3695098706","798193786"],"slicesMap":{}}